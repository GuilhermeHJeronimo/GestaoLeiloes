<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Dashboard{% endblock %} - Gestão de Leilões</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; background-color: #f0f2f5; color: #333; }
        .sidebar { position: fixed; left: 0; top: 0; bottom: 0; width: 220px; background-color: #343a40; color: white; padding-top: 20px; display: flex; flex-direction: column; }
        .sidebar h2 { text-align: center; color: #fff; padding-bottom: 10px; margin-top: 0; border-bottom: 1px solid #495057;}
        
        /* --- MUDANÇAS AQUI --- */
        .sidebar .menu-container {
            flex-grow: 1; /* Faz esta área crescer para ocupar o espaço */
            overflow-y: auto; /* Adiciona a barra de rolagem vertical SE necessário */
        }
        
        .sidebar ul { list-style: none; padding: 0; }
        .sidebar .menu-container ul { margin-bottom: 15px; } /* Espaçamento entre seções */
        /* --- FIM DAS MUDANÇAS --- */

        .sidebar ul li a { display: block; padding: 15px 20px; color: #adb5bd; text-decoration: none; transition: background-color 0.2s, color 0.2s; font-size: 15px; }
        .sidebar ul li a:hover, .sidebar ul li.active a { background-color: #495057; color: #fff; }
        .sidebar .sub-menu { padding-left: 20px; }
        .sidebar .sub-menu li a { padding-top: 10px; padding-bottom: 10px; font-size: 14px; }
        .sidebar .menu-header { padding: 15px 20px 5px 20px; color: #6c757d; font-size: 12px; text-transform: uppercase; font-weight: bold; }
        .sidebar .logout-link a { border-top: 1px solid #495057; }
        .main-content { margin-left: 220px; padding: 30px; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>Leilões</h2>
        
        <div class="menu-container">
            <ul>
                {% if user.is_superuser %}
                    <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
                {% else %}
                    <li><a href="{% url 'dashboard_recepcao' %}">Painel da Recepção</a></li>
                {% endif %}
            </ul>
            
            <ul>
                <li class="menu-header">Operações</li>
                <li><a href="{% url 'registrar_visita' %}">Registrar Visita</a></li>
                <li><a href="{% url 'selecionar_leilao_arremate' %}">Registrar Arremates</a></li>
                <li><a href="{% url 'gerenciar_lotes' %}">Gerenciar Lotes Pós-Venda</a></li>
            </ul>

            <ul>
                <li class="menu-header">Relatórios</li>
                <ul class="sub-menu">
                    <li><a href="{% url 'lista_completa_veiculos' %}?status=DISPONIVEL">Disponíveis</a></li>
                    <li><a href="{% url 'lista_completa_veiculos' %}?status=ARREMATADO">Arrematados</a></li>
                    <li><a href="{% url 'lista_completa_veiculos' %}?status=PAGAMENTO_CONFIRMADO">Pagamento Confirmado</a></li>
                    <li><a href="{% url 'lista_completa_veiculos' %}?status=RETIRADO">Retirados</a></li>
                </ul>
            </ul>

            {% if user.is_superuser %}
            <ul>
                <li class="menu-header">Administração</li>
                <li><a href="{% url 'criar_leilao' %}">Cadastrar Novo Leilão</a></li>
                <li><a href="{% url 'upload_excel' %}">Importar Planilha</a></li>
                <li><a href="/admin/">Painel Admin Completo</a></li>
            </ul>
            {% endif %}
        </div>
        
        <ul class="logout-link">
             <li><a href="{% url 'logout' %}">Sair / Logout</a></li>
        </ul>
    </div>

    <div class="main-content">
        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="message {{ message.tags }}" style="padding: 15px; margin-bottom: 20px; border-radius: 5px; border-color: #c3e6cb; background-color: #d4edda; color: #155724;">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        {% block content %}{% endblock %}
    </div>
</body>
</html>